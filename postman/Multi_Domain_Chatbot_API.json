{
  "info": {
    "name": "Multi-Domain Chatbot API",
    "description": "Complete API collection for testing the Multi-Domain AI Chatbot that handles cities, weather, research, and product queries",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health & Status",
      "item": [
        {
          "name": "Root Endpoint",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/",
              "host": ["{{base_url}}"],
              "path": [""]
            }
          },
          "response": []
        },
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Chat Operations",
      "item": [
        {
          "name": "Send Chat Message",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Hello! How are you today?\",\n    \"conversation_id\": \"postman_test\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Get Chat History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/chat/history?conversation_id=postman_test",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "history"],
              "query": [
                {
                  "key": "conversation_id",
                  "value": "postman_test"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Clear Chat History",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"conversation_id\": \"postman_test\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat/clear",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "clear"]
            }
          },
          "response": []
        },
        {
          "name": "Get Conversation Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/chat/stats",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "stats"]
            }
          },
          "response": []
        },
        {
          "name": "Cleanup Empty Conversations",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/chat/cleanup",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "cleanup"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "City Information Tests",
      "item": [
        {
          "name": "Ask about Ankara",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Tell me about Ankara\",\n    \"conversation_id\": \"postman_test\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Ask about New York",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"What can you tell me about New York?\",\n    \"conversation_id\": \"postman_test\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Ask about Tokyo",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"I'd like to know about Tokyo, Japan\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Weather Information Tests",
      "item": [
        {
          "name": "Weather in Ankara",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"What's the weather like in Ankara?\",\n    \"conversation_id\": \"postman_test\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Weather in San Francisco",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"How's the weather in San Francisco today?\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Weather in Sydney",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Can you check the weather in Sydney, Australia?\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Research Queries Tests",
      "item": [
        {
          "name": "Research on AI",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Find research papers about artificial intelligence\",\n    \"conversation_id\": \"postman_test\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Research on Machine Learning",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"I need research on machine learning algorithms\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Research on Climate Change",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Search for climate change research papers\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Product Search Tests",
      "item": [
        {
          "name": "Search for Laptops",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Do you have any laptops available?\",\n    \"conversation_id\": \"postman_test\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Search for iPhones",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Show me iPhone products\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Search for Headphones",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"I'm looking for headphones\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Search for Books",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"What programming books do you have?\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Cheapest phone in the store",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"What is the cheapest phone in the store?\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Conversation Isolation Tests",
      "item": [
        {
          "name": "Start Conversation A",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"My name is Alice. Remember this for our conversation.\",\n    \"conversation_id\": \"conversation_a\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Start Conversation B",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"My name is Bob. Remember this for our conversation.\",\n    \"conversation_id\": \"conversation_b\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Test Conversation A Memory",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"What is my name?\",\n    \"conversation_id\": \"conversation_a\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Test Conversation B Memory",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"What is my name?\",\n    \"conversation_id\": \"conversation_b\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Get History Conversation A",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/chat/history?conversation_id=conversation_a",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "history"],
              "query": [
                {
                  "key": "conversation_id",
                  "value": "conversation_a"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get History Conversation B",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/chat/history?conversation_id=conversation_b",
              "host": ["{{base_url}}"],
              "path": ["api", "chat", "history"],
              "query": [
                {
                  "key": "conversation_id",
                  "value": "conversation_b"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Mixed & Complex Queries",
      "item": [
        {
          "name": "Multi-topic Conversation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Tell me about Berlin, then check the weather there, and also find research about urban planning\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Conversational Follow-up",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Thanks! Can you also show me any gaming products you have?\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Error Handling Tests",
      "item": [
        {
          "name": "Empty Message Test",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Invalid JSON Test",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Hello\",\n    \"invalid\": \n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Missing Message Field",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"text\": \"Hello world\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Non-existent City",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Tell me about Nonexistentville\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Non-existent Product",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Do you have any flying cars?\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Custom API Tool Tests",
      "item": [
        {
          "name": "Test Custom Jokes API Tool",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Tell me a joke\",\n    \"conversation_id\": \"postman_test\",\n    \"filter_tools\": [\"city\", \"weather\", \"research\", \"product\"],\n    \"custom_api\": {\n        \"name\": \"get_jokes\",\n        \"endpoint\": \"https://official-joke-api.appspot.com/jokes/random\",\n        \"description\": \"Get a random joke\"\n    }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Test with Only Custom API Tool",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Get me a joke please\",\n    \"conversation_id\": \"postman_test\",\n    \"filter_tools\": [],\n    \"custom_api\": {\n        \"name\": \"get_jokes\",\n        \"endpoint\": \"https://official-joke-api.appspot.com/jokes/random\",\n        \"description\": \"Get a random joke\"\n    }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        },
        {
          "name": "Test with Filtered Tools",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Can you check the weather in London?\",\n    \"conversation_id\": \"postman_test\",\n    \"filter_tools\": [\"product\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Load Testing",
      "item": [
        {
          "name": "Rapid Fire Requests",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": \"Quick test message {{$randomInt}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/chat",
              "host": ["{{base_url}}"],
              "path": ["api", "chat"]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Set timestamp for requests",
          "pm.globals.set('timestamp', Date.now());"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Basic response time check",
          "pm.test('Response time is reasonable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(30000);",
          "});",
          "",
          "// Status code checks",
          "if (pm.request.url.path.join('/') === 'api/chat') {",
          "    if (pm.request.body && pm.request.body.raw) {",
          "        try {",
          "            const requestBody = JSON.parse(pm.request.body.raw);",
          "            if (requestBody.message && requestBody.message.trim() !== '') {",
          "                pm.test('Successful chat response', function () {",
          "                    pm.response.to.have.status(200);",
          "                    pm.response.to.have.jsonBody();",
          "                    pm.expect(pm.response.json()).to.have.property('response');",
          "                });",
          "            }",
          "        } catch (e) {",
          "            pm.test('Invalid JSON should return 422', function () {",
          "                pm.response.to.have.status(422);",
          "            });",
          "        }",
          "    }",
          "}",
          "",
          "// Health check specific tests",
          "if (pm.request.url.path.join('/') === 'health') {",
          "    pm.test('Health check returns healthy status', function () {",
          "        pm.response.to.have.status(200);",
          "        pm.expect(pm.response.json().status).to.eql('healthy');",
          "    });",
          "}"
        ]
      }
    }
  ]
}